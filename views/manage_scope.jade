extends layout
block content

    - var scope = viewModel.scope;
    div.tableContainer
        h2.mainTableHeader Scope Information
        form(method="post" action="/updatescope").table
            div
                div Serial
                div
                    input(type="text" name="new_serial" value=scope.serial)
                    input(type="hidden" name="serial" value=scope.serial)
            div
                div Hospital
                div
                    input(type="text" name="hospital" value=scope.hospital)
            div
                div Current Assignment
                div
                    select(name='assignment')
                        each assignKey in Object.keys(viewModel.boardTypes)
                            if (assignKey === scope.assignment)
                                option(value=assignKey selected="selected")= viewModel.boardTypes[assignKey]
                            else
                                option(value=assignKey)= viewModel.boardTypes[assignKey]
            div
                div Current Priority
                div
                    select(name="priority")
                        each level in Object.keys(viewModel.priorityLevel)
                            if (level === scope.priority)
                                option(value=level selected="selected")= viewModel.priorityLevel[level]
                            else
                                option(value=level)= viewModel.priorityLevel[level]
            div
                div Date Added
                div= scope.date
            div.subTableHeader#updateSubmit
                button(name="submit" value="Update Scope") Update Scope
                div

    div.panel.panel-primary
        div.panel-heading.bg-primary
            div.panel-title Scope History

        div.panel-body
            table.table
                tr.subTableHeader
                    th Serial
                    th Hospital
                    th RMA
                    th Client
                    th Assignment
                    th Priority
                    th Updated
                each status in viewModel.scope.status
                    tr
                       td= status.serial
                       td= status.hospital
                       td= status.rma
                       td= status.client
                       td= viewModel.boardTypes[status.assignment]
                       td= viewModel.priorityLevel[status.priority]
                       td= status.updated_time